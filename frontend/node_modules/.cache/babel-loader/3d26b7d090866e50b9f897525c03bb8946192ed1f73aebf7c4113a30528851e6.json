{"ast":null,"code":"import _toConsumableArray from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{fetchItems}from'../services/api';import{useContext}from'react';import{AuthContext}from'../contexts/AuthContext';import AdminItemForm from'./AdminItemForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ItemsPage=function ItemsPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];useEffect(function(){var getItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetchItems();case 2:data=_context.sent;setItems(data);case 4:case\"end\":return _context.stop();}},_callee);}));return function getItems(){return _ref.apply(this,arguments);};}();getItems();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Items\"}),/*#__PURE__*/_jsx(\"ul\",{children:items.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/items/\".concat(item._id),children:item.name})},item._id);})})]});};{user&&user.role==='admin'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Item\"}),/*#__PURE__*/_jsx(AdminItemForm,{onSubmit:handleCreate})]});}// Implement the handleCreate function in the component\nvar handleCreate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newItem){var createdItem;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return createItem(newItem);case 3:createdItem=_context2.sent;setItems([].concat(_toConsumableArray(items),[createdItem]));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);alert('Failed to create item');case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleCreate(_x){return _ref2.apply(this,arguments);};}();export default ItemsPage;","map":{"version":3,"names":["React","useState","useEffect","Link","fetchItems","useContext","AuthContext","AdminItemForm","jsx","_jsx","jsxs","_jsxs","ItemsPage","_useState","_useState2","_slicedToArray","items","setItems","getItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","children","map","item","to","concat","_id","name","user","role","onSubmit","handleCreate","_ref2","_callee2","newItem","createdItem","_callee2$","_context2","createItem","_toConsumableArray","t0","alert","_x"],"sources":["C:/Users/dan__/quest-items-showcase/frontend/src/components/ItemsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchItems } from '../services/api';\r\nimport { useContext } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport AdminItemForm from './AdminItemForm';\r\n\r\n\r\nconst ItemsPage = () => {\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getItems = async () => {\r\n      const data = await fetchItems();\r\n      setItems(data);\r\n    };\r\n\r\n    getItems();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Items</h1>\r\n      <ul>\r\n        {items.map((item) => (\r\n          <li key={item._id}>\r\n            <Link to={`/items/${item._id}`}>{item.name}</Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\n{user && user.role === 'admin' && (\r\n  <div>\r\n    <h2>Create New Item</h2>\r\n    <AdminItemForm onSubmit={handleCreate} />\r\n  </div>\r\n)}\r\n\r\n// Implement the handleCreate function in the component\r\nconst handleCreate = async (newItem) => {\r\n  try {\r\n    const createdItem = await createItem(newItem);\r\n    setItems([...items, createdItem]);\r\n  } catch (error) {\r\n    alert('Failed to create item');\r\n  }\r\n};\r\n\r\n\r\n\r\nexport default ItemsPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}