{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/dan__/quest-items-showcase/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{loginUser,registerUser,getUser,logoutUser}from'../services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var history=useHistory();useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getUser();case 2:userData=_context.sent;setUser(userData);setLoading(false);case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();},[]);var login=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var userData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loginUser(email,password);case 2:userData=_context2.sent;setUser(userData);history.push('/');case 5:case\"end\":return _context2.stop();}},_callee2);}));return function login(_x,_x2){return _ref3.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(email,password,username){var userData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return registerUser(email,password,username);case 2:userData=_context3.sent;setUser(userData);history.push('/');case 5:case\"end\":return _context3.stop();}},_callee3);}));return function register(_x3,_x4,_x5){return _ref4.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return logoutUser();case 2:setUser(null);history.push('/');case 4:case\"end\":return _context4.stop();}},_callee4);}));return function logout(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,loading:loading,login:login,register:register,logout:logout},children:children});};export{AuthContext,AuthProvider};","map":{"version":3,"names":["React","createContext","useState","useEffect","useHistory","loginUser","registerUser","getUser","logoutUser","jsx","_jsx","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","loading","setLoading","history","fetchUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","login","_ref3","_callee2","email","password","_callee2$","_context2","push","_x","_x2","register","_ref4","_callee3","username","_callee3$","_context3","_x3","_x4","_x5","logout","_ref5","_callee4","_callee4$","_context4","Provider","value"],"sources":["C:/Users/dan__/quest-items-showcase/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { loginUser, registerUser, getUser, logoutUser } from '../services/auth';\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const userData = await getUser();\r\n      setUser(userData);\r\n      setLoading(false);\r\n    };\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const login = async (email, password) => {\r\n    const userData = await loginUser(email, password);\r\n    setUser(userData);\r\n    history.push('/');\r\n  };\r\n\r\n  const register = async (email, password, username) => {\r\n    const userData = await registerUser(email, password, username);\r\n    setUser(userData);\r\n    history.push('/');\r\n  };\r\n\r\n  const logout = async () => {\r\n    await logoutUser();\r\n    setUser(null);\r\n    history.push('/');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, login, register, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}